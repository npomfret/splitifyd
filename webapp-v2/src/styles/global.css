@tailwind base;
@tailwind components;
@tailwind utilities;

/* Dynamic theme variables */
:root {
    /* Legacy theme helpers (will be removed once all components migrate) */
    --theme-primary: #3b82f6;
    --theme-primary-light: #3b82f620;
    --theme-primary-dark: #60a5fa;
    --theme-name: 'Ocean Blue';
    --theme-pattern: solid;

    /* Semantic color system (overridden by /api/theme.css) */
    --surface-base-rgb: 255 255 255;
    --surface-muted-rgb: 245 247 251;
    --surface-raised-rgb: 250 250 255;
    --text-primary-rgb: 15 23 42;
    --text-muted-rgb: 71 85 105;
    --text-inverted-rgb: 255 255 255;
    --interactive-primary-rgb: 37 99 235;
    --interactive-primary-foreground-rgb: 255 255 255;
    --interactive-secondary-rgb: 124 58 237;
    --border-default-rgb: 226 232 240;
    --border-strong-rgb: 148 163 184;

    --spacing-xs: 0.25rem;
    --spacing-sm: 0.5rem;
    --spacing-md: 0.75rem;
    --spacing-lg: 1rem;
    --spacing-xl: 1.5rem;

    --radius-sm: 0.25rem;
    --radius-md: 0.5rem;
    --radius-lg: 1rem;
    --radius-full: 9999px;

    --text-xs: 0.75rem;
    --text-leading-xs: 1rem;
    --text-sm: 0.875rem;
    --text-leading-sm: 1.25rem;
    --text-base: 1rem;
    --text-leading-base: 1.5rem;
    --text-lg: 1.125rem;
    --text-leading-lg: 1.75rem;
    --text-xl: 1.25rem;
    --text-leading-xl: 1.75rem;

    --shadow-sm: 0 1px 2px rgba(15, 23, 42, 0.12);
    --shadow-md: 0 4px 12px rgba(15, 23, 42, 0.12);
    --shadow-lg: 0 20px 60px rgba(15, 23, 42, 0.15);

    /* System colors */
    --color-success: #10b981;
    --color-warning: #f59e0b;
    --color-danger: #ef4444;
    --color-info: #3b82f6;
}

/* Base styles */
@layer base {
    html,
    body {
        @apply antialiased;
        min-height: 100vh;
    }

    #app {
        min-height: 100vh;
    }

    /* Ensure theme color meta is updated */
    html {
        color-scheme: light dark;
    }
}

/* Theme-aware component styles */
@layer components {
    /* Theme-aware button variants */
    .btn-theme-primary {
        background-color: var(--theme-primary);
        color: white;
        transition: all 0.2s ease-in-out;
    }

    .btn-theme-primary:hover {
        background-color: var(--theme-primary-dark);
        transform: translateY(-1px);
    }

    .btn-theme-outline {
        background-color: transparent;
        color: var(--theme-primary);
        border: 2px solid var(--theme-primary);
        transition: all 0.2s ease-in-out;
    }

    .btn-theme-outline:hover {
        background-color: var(--theme-primary);
        color: white;
    }

    /* Theme-aware card */
    .card-theme-accent {
        border-left: 4px solid var(--theme-primary);
        background: linear-gradient(to right, var(--theme-primary-light), transparent 50%);
    }

    /* User indicator dot */
    .user-indicator {
        @apply w-3 h-3 rounded-full relative inline-block;
        background-color: var(--theme-primary);
        border: 2px solid white;
        box-shadow: 0 0 0 1px rgba(0, 0, 0, 0.1);
    }

    /* Expense item with user theming */
    .expense-item-themed {
        @apply border-l-4 bg-gradient-to-r from-transparent to-transparent;
        border-left-color: var(--theme-primary);
        background-image: linear-gradient(to right, var(--theme-primary-light), transparent 50%);
    }

    /* Focus states using theme color */
    .focus-theme {
        @apply focus:outline-none focus:ring-2 focus:ring-offset-2;
        --tw-ring-color: var(--theme-primary);
    }
}

/* Utility classes for theme colors */
@layer utilities {
    /* Background utilities */
    .bg-theme-primary {
        background-color: var(--theme-primary);
    }

    .bg-theme-light {
        background-color: var(--theme-primary-light);
    }

    /* Text utilities */
    .text-theme-primary {
        color: var(--theme-primary);
    }

    /* Border utilities */
    .border-theme-primary {
        border-color: var(--theme-primary);
    }

    .border-l-theme-primary {
        border-left-color: var(--theme-primary);
    }

    /* Ring utilities */
    .ring-theme-primary {
        --tw-ring-color: var(--theme-primary);
    }

    /* Hover states */
    .hover\:bg-theme-primary:hover {
        background-color: var(--theme-primary);
    }

    .hover\:text-theme-primary:hover {
        color: var(--theme-primary);
    }

    /* Pattern utilities for accessibility */
    .pattern-dots {
        background-image: radial-gradient(circle, rgba(255, 255, 255, 0.3) 2px, transparent 2px);
        background-size: 8px 8px;
    }

    .pattern-stripes {
        background-image: repeating-linear-gradient(45deg, var(--theme-primary), var(--theme-primary) 4px, rgba(255, 255, 255, 0.2) 4px, rgba(255, 255, 255, 0.2) 8px);
    }

    .pattern-diagonal {
        background-image: repeating-linear-gradient(-45deg, var(--theme-primary), var(--theme-primary) 3px, rgba(255, 255, 255, 0.2) 3px, rgba(255, 255, 255, 0.2) 6px);
    }
}

/* Dark mode support */
@media (prefers-color-scheme: dark) {
    :root {
        --theme-primary-light: #3b82f610; /* Reduced opacity for dark mode */
    }

    .user-indicator {
        border-color: rgb(var(--border-strong-rgb, 148 163 184));
    }

    /* Adjust patterns for dark mode */
    .pattern-dots {
        background-image: radial-gradient(circle, rgba(0, 0, 0, 0.3) 2px, transparent 2px);
    }

    .pattern-stripes {
        background-image: repeating-linear-gradient(45deg, var(--theme-primary), var(--theme-primary) 4px, rgba(0, 0, 0, 0.2) 4px, rgba(0, 0, 0, 0.2) 8px);
    }

    .pattern-diagonal {
        background-image: repeating-linear-gradient(-45deg, var(--theme-primary), var(--theme-primary) 3px, rgba(0, 0, 0, 0.2) 3px, rgba(0, 0, 0, 0.2) 6px);
    }
}
