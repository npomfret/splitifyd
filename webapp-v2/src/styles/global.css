@import 'tailwindcss';

@theme {
  --color-surface-base: rgb(var(--surface-base-rgb, 255 255 255));
  --color-surface-muted: rgb(var(--surface-muted-rgb, 245 247 251));
  --color-surface-raised: rgb(var(--surface-raised-rgb, 250 250 255));
  --color-surface-subtle: rgb(
    var(--surface-subtle-rgb, var(--surface-raised-rgb, 250 250 255))
  );
  --color-surface-popover: rgb(
    var(--surface-popover-rgb, var(--surface-base-rgb, 248 250 252))
  );
  --color-text-primary: rgb(var(--text-primary-rgb, 15 23 42));
  --color-text-muted: rgb(var(--text-muted-rgb, 71 85 105));
  --color-text-inverted: rgb(var(--text-inverted-rgb, 255 255 255));
  --color-interactive-primary: rgb(var(--interactive-primary-rgb, 37 99 235));
  --color-interactive-primary-foreground: rgb(
    var(--interactive-primary-foreground-rgb, 255 255 255)
  );
  --color-interactive-secondary: rgb(
    var(--interactive-secondary-rgb, 124 58 237)
  );
  --color-interactive-secondary-foreground: rgb(
    var(--interactive-secondary-foreground-rgb, 255 255 255)
  );
  --color-interactive-accent: rgb(var(--interactive-accent-rgb, 34 197 94));
  --color-interactive-ghost: rgb(var(--interactive-ghost-rgb, 100 116 139));
  --color-interactive-magnetic: rgb(
    var(--interactive-magnetic-rgb, 59 130 246)
  );
  --color-interactive-glow: rgb(var(--interactive-glow-rgb, 168 85 247));
  --color-semantic-success: rgb(var(--semantic-success-rgb, 22 163 74));
  --color-semantic-warning: rgb(var(--semantic-warning-rgb, 234 179 8));
  --color-semantic-error: rgb(var(--semantic-error-rgb, 220 38 38));
  /* Text color for "you owe" amounts - distinct from error states */
  --color-text-owed: rgb(var(--text-owed-rgb, 234 179 8));
  --color-surface-warning: rgb(var(--surface-warning-rgb, 254 252 232));
  --color-surface-error: rgb(var(--surface-error-rgb, 254 226 226));
  --color-border-subtle: rgb(var(--border-subtle-rgb, 241 245 249));
  --color-border-default: rgb(var(--border-default-rgb, 226 232 240));
  --color-border-strong: rgb(var(--border-strong-rgb, 148 163 184));
  --color-border-warning: rgb(var(--border-warning-rgb, 250 204 21));
  --color-border-error: rgb(var(--border-error-rgb, 248 180 180));

  /* Custom semantic spacing - using 'space-' prefix to avoid conflict with Tailwind v4's built-in utilities */
  --space-xs: var(--space-xs, 0.25rem);
  --space-sm: var(--space-sm, 0.5rem);
  --space-md: var(--space-md, 0.75rem);
  --space-lg: var(--space-lg, 1rem);
  --space-xl: var(--space-xl, 1.5rem);

  --radius-sm: var(--radii-sm, 0.25rem);
  --radius-md: var(--radii-md, 0.5rem);
  --radius-lg: var(--radii-lg, 1rem);
  --radius-full: var(--radii-full, 9999px);

  --text-xs: var(--text-xs, 0.75rem);
  --text-xs--line-height: var(--text-leading-xs, 1rem);
  --text-sm: var(--text-sm, 0.875rem);
  --text-sm--line-height: var(--text-leading-sm, 1.25rem);
  --text-base: var(--text-base, 1rem);
  --text-base--line-height: var(--text-leading-base, 1.5rem);
  --text-lg: var(--text-lg, 1.125rem);
  --text-lg--line-height: var(--text-leading-lg, 1.75rem);
  --text-xl: var(--text-xl, 1.25rem);
  --text-xl--line-height: var(--text-leading-xl, 1.75rem);
  --text-fluid-xs: var(--fluid-xs, 0.75rem);
  --text-fluid-xs--line-height: 1rem;
  --text-fluid-sm: var(--fluid-sm, 0.875rem);
  --text-fluid-sm--line-height: 1.25rem;
  --text-fluid-base: var(--fluid-base, 1rem);
  --text-fluid-base--line-height: 1.5rem;
  --text-fluid-lg: var(--fluid-lg, 1.125rem);
  --text-fluid-lg--line-height: 1.75rem;
  --text-fluid-xl: var(--fluid-xl, 1.25rem);
  --text-fluid-xl--line-height: 1.75rem;
  --text-fluid-2xl: var(--fluid-2xl, 1.5rem);
  --text-fluid-2xl--line-height: 2rem;
  --text-fluid-3xl: var(--fluid-3xl, 1.875rem);
  --text-fluid-3xl--line-height: 2.25rem;
  --text-fluid-4xl: var(--fluid-4xl, 2.25rem);
  --text-fluid-4xl--line-height: 2.5rem;
  --text-fluid-hero: var(--fluid-hero, 3rem);
  --text-fluid-hero--line-height: 1.1;

  --shadow-sm: var(--shadow-sm, 0 1px 2px rgba(15, 23, 42, 0.12));
  --shadow-md: var(--shadow-md, 0 4px 12px rgba(15, 23, 42, 0.12));
  --shadow-lg: var(--shadow-lg, 0 20px 60px rgba(15, 23, 42, 0.15));

  --animate-slide-up: slide-up 0.3s ease-out;

  @keyframes slide-up {
    0% {
      transform: translateY(100%);
      opacity: 0;
    }
    100% {
      transform: translateY(0);
      opacity: 1;
    }
  }
}

/*
  The default border color has changed to `currentcolor` in Tailwind CSS v4,
  so we've added these compatibility styles to make sure everything still
  looks the same as it did with Tailwind CSS v3.

  If we ever want to remove these styles, we need to add an explicit border
  color utility to any element that depends on these defaults.
*/
@layer base {
  *,
  ::after,
  ::before,
  ::backdrop,
  ::file-selector-button {
    border-color: var(--color-gray-200, currentcolor);
  }
}

@utility btn-polished {
  /*
     * Button polish - lift + scale on hover using theme timing
     * Applied via .btn-polished class on buttons that want the effect
     */
  transition:
    transform var(--motion-duration-base, 320ms)
      var(--motion-easing-standard, cubic-bezier(0.22, 1, 0.36, 1)),
    box-shadow var(--motion-duration-base, 320ms)
      var(--motion-easing-standard, cubic-bezier(0.22, 1, 0.36, 1));

  &:hover:not(:disabled) {
    transform: translateY(-2px) scale(1.01);
  }
  @media (prefers-reduced-motion: reduce) {
    &:hover:not(:disabled) {
      transform: none;
    }
  }
}
@utility btn-gradient {
  &:hover:not(:disabled) {
    box-shadow:
      0 0 20px
        rgba(
          var(--interactive-magnetic-rgb, var(--interactive-primary-rgb)),
          0.4
        ),
      0 8px 16px rgba(0, 0, 0, 0.3);
  }
}
@utility focus-glow {
  /*
     * Interactive glow utilities
     * Uses --interactive-glow-rgb for focus state outer glow
     * Falls back to --interactive-primary-rgb if glow not defined
     */
  &:focus-visible {
    box-shadow:
      0 0 0 2px var(--surface-base, #fff),
      0 0 0 4px rgb(var(--interactive-glow-rgb, var(--interactive-primary-rgb))),
      0 0 16px
        rgba(var(--interactive-glow-rgb, var(--interactive-primary-rgb)), 0.5);
  }
}
@utility magnetic-glow {
  /* Magnetic hover glow - uses --interactive-magnetic-rgb for cursor-following effect */
  &:hover {
    box-shadow: 0 0 24px
      rgba(
        var(--interactive-magnetic-rgb, var(--interactive-primary-rgb)),
        0.35
      );
  }
}
@utility glass-panel {
  /* Respect reduced motion */

  /* Glassmorphism panel with hover glow per Modern UI/UX guide section 2.1 */
  position: relative;
  overflow: hidden;
  border-radius: var(--radii-lg, 1rem);
  border: 1px solid var(--border-glassBorder, rgba(255, 255, 255, 0.08));
  box-shadow: var(--shadows-md, 0 4px 12px rgba(0, 0, 0, 0.1));

  /* Hover glow overlay for glass panels */
  &::after {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(
      120deg,
      rgba(255, 255, 255, 0.1),
      transparent 60%
    );
    opacity: 0;
    transition: opacity var(--motion-duration-base, 320ms)
      var(--motion-easing-standard, cubic-bezier(0.22, 1, 0.36, 1));
    pointer-events: none; /* CRITICAL: Don't block interaction */
    z-index: 1;
  }

  &:hover::after {
    opacity: 1;
  }
}
@utility eyebrow {
  /* Hero eyebrow text (uppercase label above headlines) */
  text-transform: uppercase;
  letter-spacing: 0.4em;
  font-size: var(--typography-sizes-xs, 0.75rem);
  color: var(--text-eyebrow, var(--text-muted));
  margin-bottom: 0.75rem;

  &.tight {
    margin-bottom: 0.35rem;
  }
}
@utility tight {
  &.eyebrow {
    margin-bottom: 0.35rem;
  }
}
@utility hero-text {
  /* Hero text styling - uses theme's hero color */
  color: var(--text-hero, var(--text-primary));
}
@utility code-text {
  /* Code text styling - uses theme's code color */
  font-family: var(--typography-fontFamily-mono, monospace);
  color: var(--text-code, var(--palette-accent));
  background: rgba(var(--palette-accent-rgb, 139 92 246), 0.1);
  padding: 0.125rem 0.375rem;
  border-radius: var(--radii-sm, 0.25rem);
}

/* Scroll reveal animations per Modern UI/UX guide section 4.1 */
@utility fade-up {
  /* Fade-up animation utility for scroll reveals */
  opacity: 0;
  transform: translateY(24px);
  transition:
    opacity var(--motion-duration-base, 320ms)
      var(--motion-easing-standard, cubic-bezier(0.22, 1, 0.36, 1)),
    transform var(--motion-duration-base, 320ms)
      var(--motion-easing-standard, cubic-bezier(0.22, 1, 0.36, 1));
  @media (prefers-reduced-motion: reduce) {
    opacity: 1;
    transform: none;
    transition: none;
  }
}
@utility fade-up-visible {
  opacity: 1;
  transform: translateY(0);
}
@utility grid-auto-fit {
  /* Respect prefers-reduced-motion */

  /*
     * Auto-fit responsive grids per Modern UI/UX guide section 3.1
     * Uses CSS Grid auto-fit to create intrinsically responsive layouts
     * without explicit breakpoints. Grid items adapt to available space.
     *
     * Usage:
     *   <div class="grid-auto-fit">...</div>
     *   <div class="grid-auto-fit grid-auto-fit-sm">...</div>  // smaller items
     *   <div class="grid-auto-fit grid-auto-fit-lg">...</div>  // larger items
     */
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(var(--grid-min, 280px), 1fr));
  gap: var(--semantics-spacing-componentGap, 1.5rem);
}
@utility grid-auto-fit-sm {
  /* Size variants for different content types */
  --grid-min: 200px;
}
@utility grid-auto-fit-md {
  --grid-min: 280px;
}
@utility grid-auto-fit-lg {
  --grid-min: 360px;
}

/* Base styles */
@layer base {
    html,
    body {
        @apply antialiased;
        /*
         * IMPORTANT: Aurora animated backdrop comes from tenant theme CSS
         * (generated by ThemeArtifactService when motion.enableParallax + gradient.aurora defined)
         *
         * The theme CSS creates body::before and body::after pseudo-elements with
         * layered radial gradients and a 24s animation. Do NOT add body::before/after
         * rules here as they will conflict with tenant theming.
         *
         * See: firebase/functions/src/services/tenant/ThemeArtifactService.ts
         */
        min-height: 100vh;
        margin: 0;
        padding: 0;
    }

    #app {
        /* Content layers above aurora backdrop animation */
        min-height: 100vh;
        position: relative;
        z-index: 1;
    }

    html {
        color-scheme: light dark;
    }
}

/* Modal structure utilities - standardized modal layout */
@utility modal-header {
  @apply px-6 py-4 border-b border-border-default;
}
@utility modal-content {
  @apply px-6 py-5 max-h-[70vh] overflow-y-auto;
}
@utility modal-footer {
  @apply flex items-center justify-end gap-3 px-6 py-4 border-t border-border-default;
}

/* Typography utilities */
@utility help-text {
  @apply text-sm text-text-muted;
}
@utility help-text-xs {
  @apply text-xs text-text-muted;
}
@utility field-error {
  @apply mt-2 text-sm text-semantic-error;
}

/* Badge/chip utilities */
@utility badge {
  @apply inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium;
}
@utility badge-primary {
  @apply bg-interactive-primary/10 text-interactive-primary border border-interactive-primary/20;
}
@utility badge-success {
  @apply bg-semantic-success/10 text-semantic-success border border-semantic-success/20;
}
@utility badge-warning {
  @apply bg-semantic-warning/10 text-semantic-warning border border-semantic-warning/20;
}
@utility badge-error {
  @apply bg-semantic-error/10 text-semantic-error border border-semantic-error/20;
}
@utility badge-deleted {
  @apply bg-surface-error text-semantic-error rounded;
}

/* Button hover effects per Modern UI/UX guide section 4.2 */
@layer components {

    /* Gradient button glow effect - uses magnetic color for hover glow */
}
